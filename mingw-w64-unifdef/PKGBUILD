# Maintainer: Christopher Degawa <ccom@randomderp.com>

_realname=unifdef
pkgbase=mingw-w64-${_realname}
pkgname=("${MINGW_PACKAGE_PREFIX}-${_realname}")
pkgver=2.12
pkgrel=1
pkgdesc="Remove #ifdef'ed lines (mingw-w64)"
arch=(any)
mingw_arch=(mingw32 mingw64 ucrt64 clang64)
url=https://dotat.at/prog/unifdef/
license=('BSD')
source=("https://dotat.at/prog/unifdef/unifdef-$pkgver.tar.xz")
sha256sums=('43ce0f02ecdcdc723b2475575563ddb192e988c886d368260bc0a63aee3ac400')

build() {
  cd "${srcdir}/${_realname}-${pkgver}" || return 1
  make -f win32/Makefile.mingw
}

package() {
  cd "${srcdir}/${_realname}-${pkgver}" || return 1

  DESTDIR="${pkgdir}" install

  install -Dm644 COPYING -t "${pkgdir}${MINGW_PREFIX}/share/licenses/${_realname}/"
}

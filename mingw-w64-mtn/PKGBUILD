# Maintainer: wahibre <wahibre@gmx.com>

_realname=mtn
pkgbase=mingw-w64-${_realname}
pkgname=("${MINGW_PACKAGE_PREFIX}-${_realname}")
pkgver=3.4.0
pkgrel=1
pkgdesc="Command line program to save thumbnails (screenshots) of movie or video files into jpeg/png files"
arch=('any')
url="https://gitlab.com/movie_thumbnailer/mtn"
license=('GPL2')
source=("${url}/-/archive/v${pkgver}/${_realname}-v${pkgver}.tar.gz")
sha256sums=('e9509953f0a0c1eaba7e2fe96283970a209deb54143ff8a16103e13d3f74e5a3')
makedepends=("${MINGW_PACKAGE_PREFIX}-make"
             "${MINGW_PACKAGE_PREFIX}-gcc"
             "patch")
depends=("${MINGW_PACKAGE_PREFIX}-ffmpeg"
         "${MINGW_PACKAGE_PREFIX}-libgd")

prepare() {
  cd "${srcdir}/${_realname}-v${pkgver}"
  patch -p1 -i ../../001-mtn-3.4.0-makefile.patch
}

build() {
  cd "${srcdir}/${_realname}-v${pkgver}/src"
  mingw32-make
}

package() {
  cd "${srcdir}/${_realname}-v${pkgver}/src"
  mingw32-make DESTDIR="${pkgdir}" install
}
